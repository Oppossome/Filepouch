{"version":3,"sources":["globals.js","components/ModalImage.js","components/ImageGrid.js","components/UploadsPage.js","components/NotFound.js","components/Userpage.js","components/Textlogo.js","components/Header.js","components/Hero.js","App.js","index.js"],"names":["states","getState","stateName","value","sanitize","string","map","reg","replace","match","getCurrentTime","divValue","Math","floor","Date","now","months","makeDateGood","toParse","date","dateDiff","daysPassed","hoursPassed","getMonth","getDay","getFullYear","ModalImage","props","imgData","ImgData","closeModal","e","SetSelectedImage","preventDefault","escFunc","keyCode","useEffect","document","addEventListener","url","URL","window","location","searchParams","set","fileName","history","replaceState","removeEventListener","delete","uploadDate","globals","onClick","className","stopPropagation","tabIndex","to","postedBy","id","username","href","icon","faTimes","src","alt","canDelete","DeleteFile","faTrashAlt","views","ImageObject","postDate","doAnim","justUploaded","displayFile","style","title","faEye","faCalendar","ImageGrid","GridImages","gridImages","setGridImages","useState","currentError","setCurrentError","selectedImage","setSelectedImage","currentPage","setCurrentPage","isLoading","setIsLoading","handleScroll","body","scrollHeight","documentElement","scrollTop","innerHeight","fetch","Endpoint","then","rawData","a","json","data","hasOwnProperty","err","length","catch","method","filter","file","Title","img","ind","scrollTo","UploadsPage","NotFound","console","log","FileDropzone","total","amount","uploadCount","setUploadCount","uploadFiles","files","fileTotal","fileCount","completedFiles","i","formData","FormData","append","req","XMLHttpRequest","onreadystatechange","readyState","DONE","uploadResponse","JSON","parse","responseText","unshift","count","open","setRequestHeader","uploadToken","send","dropHandler","dataTransfer","items","isUploading","onDrop","onDragOver","currentTarget","classList","add","onDragLeave","remove","htmlFor","type","onChange","target","multiple","TokenHolder","isCopied","setIsCopied","tokenHolder","useRef","tokenInput","User","isUserApproved","ref","navigator","clipboard","writeText","setTimeout","AdminPanel","TargetUser","targetUser","setTargetUser","allowUser","action","alert","isUserBanned","Userpage","currentUser","thisUser","setThisUser","userid","useParams","pathname","isErrored","isSelf","joinDate","gridTitle","endPoint","canModerate","Textlogo","translate","Header","isLoggedIn","Hero","loginBtn","App","stateValue","setValue","response","pageLoad","useCallback","elem","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e0623fc1.chunk.js","sourcesContent":["/*Global Values\n===================*/\n\nexport let states = {};\n\nexport function getState(stateName){\n\treturn states[stateName].value;\n}\n\nexport function setState(stateName, value){\n\tstates[stateName].setValue(value);\n}\n\nexport function registerState(stateName, [stateValue, setValue]) {\n\tstates[stateName] = {value: stateValue, setValue};\n\treturn states[stateName];\n}\n\nexport function sanitize(string=\"\") {\n\tconst map = {\n\t\t'&': '&amp;',\n\t\t'<': '&lt;',\n\t\t'>': '&gt;',\n\t\t'\"': '&quot;',\n\t\t\"'\": '&#x27;',\n\t\t\"/\": '&#x2F;',\n\t};\n\n\tconst reg = /[&<>\"'/]/ig;\n\treturn string.replace(reg, (match)=>(map[match]));\n}\n\nexport function getCurrentTime(divValue=1) {\n\treturn Math.floor(Date.now() / divValue);\n}\n\n\nlet months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nexport function makeDateGood(toParse) {\n\tlet date = new Date(toParse);\n\tlet dateDiff = (Date.now() - date) / 1000;\n\tlet daysPassed = (dateDiff / 86400);\n\n\tif(daysPassed < 1) {\n\t\tlet hoursPassed = (dateDiff / 3600);\n\t\treturn (hoursPassed < 1 ? Math.floor(dateDiff/60) + \"m\" : Math.floor(hoursPassed) + \"h\");\n\n\t} else if(daysPassed <= 7) {\n\t\treturn Math.floor(daysPassed)+\"d\";\n\t}\n\n\treturn `${months[date.getMonth()]} ${date.getDay()} ${daysPassed > 365 ? date.getFullYear() : ''}`;\n}","import React, { useEffect } from 'react';\nimport * as globals from '../globals.js';\nimport {Link} from 'react-router-dom';\nimport './ModalImage.css'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faTrashAlt } from '@fortawesome/free-solid-svg-icons'\n\nexport default function ModalImage(props) {\n\tlet imgData = props.ImgData;\n\n\tlet deleteFile = (e) => {\n\t\tprops.DeleteFile(imgData.fileName);\n\t\te.preventDefault();\n\t}\n\n\tlet closeModal = (e) => {\n\t\tprops.SetSelectedImage(null);\n\t\te.preventDefault();\n\t}\n\n\tlet escFunc = ((e) => {\n\t\tif(e.keyCode === 27){\n\t\t\tcloseModal(e);\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener(\"keydown\", escFunc, false);\n\n\t\tconst url = new URL(window.location);\n\t\turl.searchParams.set('image', imgData.fileName);\n\t\twindow.history.replaceState({}, '', url);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"keydown\", escFunc, false);\n\n\t\t\turl.searchParams.delete('image');\n\t\t\twindow.history.replaceState({}, '', url);\n\t\t}\n\n\t// eslint-disable-next-line\n\t},[])\n\n\n\tlet fileName = imgData.fileName.match(/^\\w{7}(.*)$/);\n\tlet uploadDate = globals.makeDateGood(imgData.date);\n\n\treturn (\n\t\t<div onClick={closeModal} className=\"modalImage\">\n\t\t\t<div onClick={(e)=>{e.stopPropagation()}}className=\"modalImage-inner\">\n\t\t\t\t<div className=\"modalImage-topbar\">\n\t\t\t\t<Link tabIndex=\"1\" to={\"/user/\"+imgData.postedBy.id }><span>{globals.sanitize(imgData.postedBy.username)}</span> Â· {uploadDate}</Link>\n\t\t\t\t\t<button tabIndex=\"2\" href=\"#\" onClick={closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"modalImage-imgholder\">\n\t\t\t\t\t<img src={\"/\" + imgData.fileName} alt=\"\"></img>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"modalImage-bottombar\">\n\t\t\t\t\t<div className = \"modalImage-titlebar\">\n\t\t\t\t\t\t<h2 tabIndex=\"3\">{globals.sanitize(fileName[1])}</h2>\n\t\t\t\t\t\t{imgData.canDelete && <button onClick={deleteFile} tabIndex=\"4\"><FontAwesomeIcon icon={faTrashAlt} /></button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<p tabIndex=\"5\">{imgData.views} View{imgData.views !== 1 ? \"s\" : \"\"}</p>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import React, { useState, useEffect } from 'react';\nimport * as globals from '../globals.js';\n\nimport './ImageGrid.css'\nimport ModalImage from './ModalImage.js';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEye, faCalendar } from '@fortawesome/free-solid-svg-icons'\n\nfunction ImageObject(props) {\n\tlet imgData = props.ImgData;\n\n\tlet displayFile = () => {\n\t\tprops.displayFile(imgData);\n\t}\n\n\tlet postDate = globals.makeDateGood(imgData.date);\n\tlet fileName = imgData.fileName.match(/^\\w{7}(.*)$/)\n\tlet doAnim = imgData.justUploaded === globals.getCurrentTime(1000);\n\treturn (<div onClick={displayFile} className={doAnim ? \"image-entry entry-popin\" : \"image-entry\"}>\n\t\t<div style={{\"backgroundImage\": \"url('/\"+imgData.fileName+\"')\"}} className=\"img\" />\n\t\t<h3>{globals.sanitize(fileName[1])}</h3>\n\n\t\t<div className=\"extended-info\">\n\t\t\t<span title=\"Views\"><p><FontAwesomeIcon icon={faEye} /> {imgData.views}</p></span>\n\t\t\t<span title=\"Posted on\"><p><FontAwesomeIcon icon={faCalendar} /> {postDate}</p></span>\n\t\t</div>\n\t</div>)\n}\n\nexport default function ImageGrid(props) {\n\tlet [gridImages, setGridImages] = props.GridImages;\n\tlet [currentError, setCurrentError] = useState(\"\");\n\tlet [selectedImage, setSelectedImage] = useState();\n\tlet [currentPage, setCurrentPage] = useState(0);\n\tlet [isLoading, setIsLoading] = useState(true);\n\n\tlet displayFile = (imgData) => {\n\t\tsetSelectedImage(imgData);\n\t}\n\n\tlet deleteFile = (fileName) => {\n\t\tfetch(\"/api/files/\"+fileName, {method: 'DELETE'}).then(async (rawData) => {\n\t\t\tlet data = await rawData.json();\n\t\t\tif( !data.hasOwnProperty(\"err\") ) {\n\t\t\t\tsetGridImages(gridImages.filter((file) => file.fileName !== fileName));\n\t\t\t\tsetSelectedImage(null);\n\t\t\t}\n\t\t})\n\t}\n\n\tlet handleScroll = (e) => {\n\t\tif(isLoading || currentPage === -1) return;\n\t\tlet scrollFromBottom = document.body.scrollHeight - (document.documentElement.scrollTop + window.innerHeight);\n\t\tif(scrollFromBottom < 10) {\n\t\t\tsetCurrentPage(currentPage + 1);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif(currentPage === -1) return;\n\t\tsetIsLoading(true);\n\n\t\tfetch(`${props.Endpoint}/${currentPage}`).then(async (rawData) => {\n\t\t\tlet data = await rawData.json();\n\t\t\tif(!data.hasOwnProperty(\"err\")){\n\t\t\t\tif(data.length !== 20) setCurrentPage(-1);\n\t\t\t\tsetGridImages([...gridImages, ...data]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t} else {\n\t\t\t\tsetCurrentError(data.err);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetCurrentPage(-1);\n\t\t\t}\n\n\t\t}).catch(() => {\n\t\t\tsetCurrentPage(-2);\n\t\t\tsetIsLoading(false);\n\n\t\t})\n\n\t// eslint-disable-next-line\n\t}, [currentPage])\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('scroll', handleScroll, false);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('scroll', handleScroll, false);\n\t\t}\n\t})\n\n\treturn (<div id=\"user-images\" className=\"container\">\n\t\t{selectedImage && <ModalImage ImgData={selectedImage} DeleteFile={deleteFile} SetSelectedImage={setSelectedImage}/>}\n\n\t\t<h2 className=\"containerHeader\">{currentError === \"\" ? props.Title : currentError}</h2>\n\t\t<div className=\"images\">\n\t\t\t{gridImages.map((img, ind) => (\n\t\t\t\t<ImageObject key={ind} ImgData={img} displayFile={displayFile} />\n\t\t\t))}\n\t\t</div>\n\n\t\t{(currentPage === -1 && gridImages.length >= 16) &&\n\t\t\t<div className=\"imgGrid-return\">\n\t\t\t\t<h3>... and then there were none</h3>\n\t\t\t\t<button onClick={() => {window.scrollTo(0, 0)}}>return to top</button>\n\t\t\t</div>\n\t\t}\n\n\t\t{isLoading && <h3 className=\"imgGrid-Loading\">Loading files<span>.</span><span>.</span><span>.</span></h3>}\n\t</div>);\n}","import React, { useState } from 'react';\nimport ImageGrid from './ImageGrid.js';\n\nexport default function UploadsPage(props) {\n\tlet [gridImages, setGridImages] = useState([]);\n\n\treturn (<>\n\t\t<ImageGrid Title='All Uploads' Endpoint='/api/files/uploads' GridImages={[gridImages, setGridImages]}/>\n\t</>);\n}","import {Link} from 'react-router-dom';\nimport React from 'react';\nimport './NotFound.css'\n\n\nfunction NotFound() {\n\tconsole.log(\"WAWA\");\n\n\treturn (\n\t\t<div id=\"notfound\">\n\t\t\t<div id=\"notfound-inner\">\n\t\t\t\t<h2><span id=\"flicker\">4</span><span>0</span><span>4</span></h2>\n\t\t\t\t<p>This page could not be found</p>\n\t\t\t\t<Link to=\"/\"className=\"stylized-btn\">Home</Link>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default NotFound","import React, { useState, useEffect, useRef } from 'react';\nimport {useParams} from 'react-router-dom';\nimport * as globals from '../globals.js';\nimport './Userpage.css'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCalendar } from '@fortawesome/free-solid-svg-icons'\nimport ImageGrid from './ImageGrid.js'\n\nfunction FileDropzone(props) {\n\tlet [uploadCount, setUploadCount] = useState({total: 0, amount: 0});\n\tlet [gridImages, setGridImages] = props.gridImages;\n\n\tlet uploadFiles = (files) => {\n\t\tlet fileTotal = files.length;\n\t\tlet fileCount = fileTotal;\n\t\tlet completedFiles = [];\n\n\t\tfor(let i = 0; i < fileTotal; i++){\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append(\"file\", files[i]);\n\n\t\t\tlet req = new XMLHttpRequest();\n\n\t\t\t// TODO: MAKE LESS JANK\n\t\t\t// eslint-disable-next-line\n\t\t\treq.onreadystatechange = function() {\n\t\t\t\tif (req.readyState === XMLHttpRequest.DONE) {\n\t\t\t\t\tlet uploadResponse = JSON.parse(req.responseText);\n\t\t\t\t\tif(!uploadResponse.hasOwnProperty(\"err\")){\n\t\t\t\t\t\tuploadResponse.justUploaded = globals.getCurrentTime(1000);\n\t\t\t\t\t\tcompletedFiles.unshift(uploadResponse);\n\t\t\t\t\t\tsetGridImages([...completedFiles, ...gridImages]);\n\t\t\t\t\t}\n\n\t\t\t\t\tfileCount--;\n\t\t\t\t\tsetUploadCount({total: fileTotal, count: fileTotal - fileCount});\n\t\t\t\t}\n\n\t\t\t\tif(fileCount === 0){\n\t\t\t\t\tsetUploadCount({total: 0, count: 0});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treq.open(\"POST\", \"/api/files/upload\");\n\t\t\treq.setRequestHeader(\"uploadToken\", globals.getState(\"currentUser\").uploadToken);\n\t\t\treq.send(formData);\n\t\t}\n\n\t\tsetUploadCount({total: fileTotal, count: 0});\n\t}\n\n\tlet manualUpload = (e) => {\n\t\tlet files = e.target.files;\n\t\te.preventDefault();\n\t\tif(uploadCount.total !== 0 || files.length === 0) return;\n\t\tuploadFiles(files);\n\t}\n\n\tlet dragOverHandler = (e) => {\n\t\te.preventDefault();\n\t\tif(uploadCount.total !== 0) return;\n\t\te.currentTarget.classList.add(\"isOver\");\n\t}\n\n\tlet dragLeaveHandler = (e) => {\n\t\te.preventDefault();\n\t\tif(uploadCount.total !== 0) return;\n\t\te.currentTarget.classList.remove(\"isOver\");\n\t}\n\n\tlet dropHandler = async (e) => {\n\t\te.preventDefault();\n\t\tif(uploadCount.total !== 0) return;\n\n\t\tif(e.dataTransfer.items) {\n\t\t\tuploadFiles(e.dataTransfer.files);\n\t\t}\n\t}\n\n\tlet isUploading = uploadCount.total !== 0;\n\treturn (<div id=\"drop_outer\" className=\"container\">\n\t\t<div id=\"drop_zone\" className={isUploading ? \"isOver\" : \"\"} onDrop={dropHandler} onDragOver={dragOverHandler} onDragLeave={dragLeaveHandler}>\n\t\t\t<label htmlFor={!isUploading ? \"drop_manual-upload\" : \"\"} id=\"drop_manual-label\">{isUploading ? `Uploading files ${uploadCount.count} of ${uploadCount.total}` : (<><span>Choose a file</span> or drag it here.</>)}</label>\n\t\t\t<input type=\"file\" id=\"drop_manual-upload\" onChange={manualUpload} multiple />\n\t\t</div>\n\t</div>)\n}\n\nfunction TokenHolder(props) {\n\tlet [isCopied, setIsCopied] = useState(false);\n\tlet tokenHolder = useRef(null);\n\tlet tokenInput = useRef(null);\n\n\tlet doCopy = (e) => {\n\t\te.preventDefault();\n\t\tnavigator.clipboard.writeText(props.User.uploadToken).then(() => {\n\t\t\tsetTimeout(() => { setIsCopied(false);}, 3000);\n\t\t\tsetIsCopied(true);\n\t\t});\n\t}\n\n\tif(props.User.isUserApproved){\n\t\treturn (<div ref={tokenHolder} className={isCopied ? \"tokenCopied\" : \"\"} id=\"tokenholder\">\n\t\t\t<p>Upload Token</p>\n\t\t\t<input onChange={()=>{}} ref={tokenInput} id=\"tokencapture\" type=\"text\" value={props.User.uploadToken} />\n\t\t\t<button className={isCopied ? \"no-hover\" : \"\"} onClick={doCopy}>{isCopied ? \"Copied!\" : \"Copy\"}</button>\n\t\t</div>)\n\t} else {\n\t\treturn (<p className=\"tokenholder-denied\">This account requires admin approval to upload</p>)\n\t}\n}\n\nfunction AdminPanel(props) {\n\tlet [targetUser, setTargetUser] = props.TargetUser;\n\n\tlet allowUser = (e, action) => {\n\t\te.preventDefault();\n\t\tfetch(`/api/users/${targetUser.id}/${action}`, {method: 'POST'}).then(async (rawData) => {\n\t\t\tlet data = await rawData.json();\n\t\t\tif(!data.hasOwnProperty(\"err\")) {\n\t\t\t\tsetTargetUser(data);\n\t\t\t}\n\t\t}).catch((err) => {\n\t\t\talert(err);\n\t\t})\n\t}\n\n\tconsole.log(targetUser.isUserApproved);\n\treturn (\n\t\t<div id=\"adminPanel\" className=\"container\">\n\t\t\t<h2 className=\"containerHeader\">Admin Panel</h2>\n\t\t\t<div className=\"adminPanel-btns\">\n\t\t\t\t{!targetUser.isUserApproved && <button onClick={(e) => allowUser(e, \"TOGGLE_APPROVAL\")}>Allow user to upload</button>}\n\t\t\t\t<button href=\"\" onClick={(e) => allowUser(e, \"BAN_USER\")}>{targetUser.isUserBanned ? \"Unban User\" : \"Ban User\"}</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default function Userpage(props) {\n\tlet currentUser = globals.getState(\"currentUser\");\n\tlet [gridImages, setGridImages] = useState([]);\n\tlet [thisUser, setThisUser] = useState({});\n\tlet {userid} = useParams();\n\n\tuseEffect(() => {\n\t\tif(userid === \"me\") return setThisUser(currentUser);\n\t\tfetch(\"/api/users/\"+userid).then(async (rawData) => {\n\t\t\tlet data = await rawData.json();\n\t\t\tsetThisUser(data);\n\t\t})\n\n\t// eslint-disable-next-line\n\t}, [currentUser])\n\n\tuseEffect(() => {\n\t\tconst url = new URL(window.location);\n\t\tif(thisUser.hasOwnProperty(\"id\") && url.pathname === '/user/me'){\n\t\t\turl.pathname = `/user/${thisUser.id}`;\n\t\t\twindow.history.replaceState({}, '', url);\n\t\t}\n\n\t}, [thisUser])\n\n\tlet isErrored = thisUser.hasOwnProperty(\"err\")\n\n\tif(!thisUser.hasOwnProperty(\"id\") || isErrored) {\n\t\treturn (<div className=\"container\">\n\t\t\t<h2>{isErrored ? \"User not found\" : \"Loading user...\"}</h2>\n\t\t</div>)\n\n\t} else {\n\t\tlet isSelf = thisUser.hasOwnProperty(\"uploadToken\");\n\t\tlet joinDate = globals.makeDateGood(thisUser.date);\n\t\tlet gridTitle = gridImages.length > 0 ? thisUser.username+\"'s Uploads\" : thisUser.username+\" has no uploads\";\n\t\tlet endPoint = `/api/users/files/${thisUser.id}`;\n\n\t\treturn (<>\n\t\t\t<div id=\"userpage\" className=\"container\">\n\t\t\t\t<div className=\"userInfo\">\n\t\t\t\t\t<h2>{globals.sanitize(thisUser.username)}</h2>\n\t\t\t\t\t<div className=\"userinfo-holder\">\n\t\t\t\t\t\t<span title=\"Joined on\"><p><FontAwesomeIcon icon={faCalendar} /> {joinDate}</p></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{isSelf && <TokenHolder User={thisUser}/>}\n\t\t\t</div>\n\n\t\t\t{(thisUser.canModerate) && <AdminPanel TargetUser={[thisUser, setThisUser]}/>}\n\t\t\t{isSelf && <FileDropzone gridImages={[gridImages, setGridImages]}/>}\n\t\t\t<ImageGrid Title={gridTitle} Endpoint={endPoint} GridImages={[gridImages, setGridImages]}/>\n\t\t</>)\n\t}\n}","import './Textlogo.css'\n\nfunction Textlogo() {\n\treturn (\n\t\t<h1 className=\"textlogo\" translate=\"no\">File<span>pouch</span></h1>\n\t)\n}\n\nexport default Textlogo;","import React from 'react';\nimport * as globals from '../globals.js';\nimport Textlogo from './Textlogo.js';\nimport './Header.css';\n\n\nfunction Header(props) {\n\tlet currentUser = globals.getState(\"currentUser\");\n\tlet isLoggedIn = currentUser.hasOwnProperty(\"id\");\n\n\treturn (\n\t\t<header id=\"pageHeader\">\n\t\t\t<div id=\"pageHeader-inner\">\n\t\t\t\t<Textlogo />\n\t\t\t\t<a href={isLoggedIn ? \"/auth/logout\" : \"/auth/discord\" }>{isLoggedIn ? \"Logout\" : \"Login\"}</a>\n\t\t\t</div>\n\t\t</header>\n\t)\n}\n\nexport default Header;","import React from 'react';\nimport * as globals from '../globals.js';\nimport {Link} from 'react-router-dom';\nimport Textlogo from './Textlogo';\nimport './Hero.css';\n\n\nexport default function Hero() {\n\tlet currentUser = globals.getState(\"currentUser\");\n\tlet loginBtn = (<a className=\"stylized-btn\" href=\"/auth/discord\">Sign in</a>)\n\n\tif(currentUser.hasOwnProperty(\"id\")) {\n\t\tloginBtn = (<Link to=\"/user/me\" className=\"stylized-btn\">My Profile</Link>);\n\t}\n\n\n\treturn (\n\t\t<body id=\"hero\">\n\t\t\t<div id=\"hero-center\">\n\t\t\t\t<Textlogo />\n\t\t\t\t<p>An Open Source Filehost</p>\n\t\t\t\t{loginBtn}\n\t\t\t</div>\n\t\t</body>\n\t)\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport * as globals from './globals.js';\nimport './App.css';\n\nimport UploadsPage from './components/UploadsPage.js';\nimport NotFound from './components/NotFound.js';\nimport Userpage from './components/Userpage.js';\nimport Header from './components/Header.js';\nimport Hero from './components/Hero.js';\n\nimport {\n\tBrowserRouter as Router,\n\tSwitch,\n\tRoute\n} from \"react-router-dom\";\n\nfunction App() {\n\tglobals.registerState(\"currentUser\", useState({}));\n\n\tuseEffect(() => {\n\t\tfetch(\"/api/users/me\").then(response => response.json()).then(data => {\n\t\t\tglobals.setState(\"currentUser\", data);\n\t\t})\n\t}, [])\n\n\n\t// Janky fix for https://bugs.chromium.org/p/chromium/issues/detail?id=332189\n\tlet pageLoad = useCallback((elem) => {\n\t\tif(!elem) return;\n\t\telem.classList.add(\"anim-me\");\n\t}, [])\n\n\treturn (\n\t<div className=\"App\" ref={pageLoad}>\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t<Hero/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/user/:userid?\">\n\t\t\t\t\t<Header/>\n\t\t\t\t\t<Userpage/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/uploads\">\n\t\t\t\t\t<Header/>\n\t\t\t\t\t<UploadsPage/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"*\">\n\t\t\t\t\t<NotFound/>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</Router>\n\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <>\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>\n  </>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}